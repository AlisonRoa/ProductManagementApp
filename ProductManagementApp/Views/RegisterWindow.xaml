<Window x:Class="ProductManagementApp.Views.RegisterWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Registro"
        Height="600" Width="960"
        WindowStartupLocation="CenterScreen"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="Transparent" Icon="/Views/menu.png">

    <Window.Resources>
        <!-- TextBox con watermark tomado de Tag (ellipsis + tooltip) -->
        <Style x:Key="WatermarkTextBox" TargetType="TextBox">
            <Setter Property="Height" Value="38"/>
            <Setter Property="Margin" Value="0,6,0,16"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="Background" Value="#F7F9FC"/>
            <Setter Property="BorderBrush" Value="#E3E8EF"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="SnapsToDevicePixels" Value="True"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="10">
                            <Grid>
                                <ScrollViewer x:Name="PART_ContentHost"/>
                                <TextBlock x:Name="Watermark"
                                           Text="{TemplateBinding Tag}"
                                           Foreground="Gray"
                                           Margin="12,0,12,0"
                                           VerticalAlignment="Center"
                                           IsHitTestVisible="False"
                                           Visibility="Collapsed"
                                           TextWrapping="NoWrap"
                                           TextTrimming="CharacterEllipsis"
                                           ToolTipService.ShowDuration="60000">
                                    <TextBlock.ToolTip>
                                        <ToolTip Content="{TemplateBinding Tag}"/>
                                    </TextBlock.ToolTip>
                                </TextBlock>
                            </Grid>
                        </Border>
                        <ControlTemplate.Triggers>
                            <MultiTrigger>
                                <MultiTrigger.Conditions>
                                    <Condition Property="Text" Value=""/>
                                    <Condition Property="IsKeyboardFocused" Value="False"/>
                                </MultiTrigger.Conditions>
                                <Setter TargetName="Watermark" Property="Visibility" Value="Visible"/>
                            </MultiTrigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Estilo visual base para PasswordBox -->
        <Style x:Key="PasswordInput" TargetType="PasswordBox">
            <Setter Property="Height" Value="38"/>
            <Setter Property="Margin" Value="0,6,0,16"/>
            <Setter Property="Padding" Value="12,6"/>
            <Setter Property="Background" Value="#F7F9FC"/>
            <Setter Property="BorderBrush" Value="#E3E8EF"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="PasswordBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="10">
                            <ScrollViewer x:Name="PART_ContentHost"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Botón primario -->
        <Style x:Key="PrimaryButton" TargetType="Button">
            <Setter Property="Height" Value="42"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border CornerRadius="10">
                            <Border.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#6B7CFF" Offset="0"/>
                                    <GradientStop Color="#5A64FF" Offset="1"/>
                                </LinearGradientBrush>
                            </Border.Background>
                            <ContentPresenter VerticalAlignment="Center" HorizontalAlignment="Center" Margin="8,0"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Opacity" Value="0.9"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.6"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Link -->
        <Style TargetType="TextBlock" x:Key="Link">
            <Setter Property="Foreground" Value="#5667FF"/>
            <Setter Property="TextDecorations" Value="Underline"/>
            <Setter Property="Cursor" Value="Hand"/>
        </Style>

        <Style x:Key="SecondaryButton" TargetType="Button">
            <Setter Property="Height" Value="42"/>
            <Setter Property="Foreground" Value="#111827"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="#E3E8EF"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="10"
                                SnapsToDevicePixels="True">
                            <ContentPresenter HorizontalAlignment="Center"
                                              VerticalAlignment="Center"
                                              Margin="8,0"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#F7F9FC"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#EEF2F7"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Opacity" Value="0.6"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Etiquetas de formulario: una línea con … y tooltip -->
        <Style x:Key="FormLabel" TargetType="TextBlock">
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="#374151"/>
            <Setter Property="TextWrapping" Value="Wrap"/>
            <Setter Property="TextTrimming" Value="None"/>
            <Setter Property="MaxWidth" Value="560"/>
            <Setter Property="ToolTipService.ShowDuration" Value="60000"/>
            <Setter Property="ToolTip">
                <Setter.Value>
                    <Binding Path="Text" RelativeSource="{RelativeSource Self}"/>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <!-- Ventana contenedor con imagen de fondo -->
    <Border Background="White" CornerRadius="20" Margin="20">
        <Grid>
            <Grid.Background>
                <ImageBrush ImageSource="pack://application:,,,/Resources/login_background.jpg"
                            Stretch="UniformToFill"/>
            </Grid.Background>

            <!-- Botón cerrar -->
            <Button x:Name="BtnClose"
                    Content="✕"
                    Width="36" Height="36"
                    FontWeight="Bold" FontSize="16"
                    Foreground="#333" Background="White"
                    BorderThickness="0"
                    HorizontalAlignment="Right" VerticalAlignment="Top"
                    Margin="0,10,10,0"
                    Click="Close_Click">
                <Button.Effect>
                    <DropShadowEffect BlurRadius="12" ShadowDepth="2" Direction="270" Color="#55000000" Opacity="0.5"/>
                </Button.Effect>
                <Button.Template>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}" CornerRadius="18" SnapsToDevicePixels="True">
                            <ContentPresenter HorizontalAlignment="Center" VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#f0f0f0"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#e0e0e0"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Button.Template>
            </Button>

            <!-- Card centrada -->
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition/>
                    <ColumnDefinition Width="640"/>
                    <ColumnDefinition/>
                </Grid.ColumnDefinitions>

                <Border Grid.Column="1"
                        Background="White"
                        CornerRadius="18"
                        Padding="36"
                        MaxWidth="640"
                        VerticalAlignment="Center"
                        Margin="61,16,60,16">
                    <Border.Effect>
                        <DropShadowEffect BlurRadius="28" ShadowDepth="4" Direction="270" Color="#33000000" Opacity="0.55"/>
                    </Border.Effect>

                    <!-- Contenido -->
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <!-- título -->
                            <RowDefinition Height="Auto"/>
                            <!-- username -->
                            <RowDefinition Height="Auto"/>
                            <!-- pass + confirm -->
                            <RowDefinition Height="Auto"/>
                            <!-- nombres + apellidos -->
                            <RowDefinition Height="Auto"/>
                            <!-- teléfono + correo -->
                            <RowDefinition Height="Auto"/>
                            <!-- botones -->
                            <RowDefinition Height="Auto"/>
                            <!-- link -->
                        </Grid.RowDefinitions>

                        <!-- Título -->
                        <StackPanel Grid.Row="0" HorizontalAlignment="Center" Margin="0,0,0,16">
                            <TextBlock Text="Crear cuenta" FontSize="22" FontWeight="Bold" Foreground="#111827" TextAlignment="Center"/>
                            <TextBlock Text="Completa tus datos para registrarte" Foreground="#6B7280" TextAlignment="Center"/>
                        </StackPanel>

                        <!-- Username -->
                        <StackPanel Grid.Row="1" Orientation="Vertical">
                            <TextBlock Text="Usuario" Style="{StaticResource FormLabel}"/>
                            <TextBox x:Name="TxtUsername" Style="{StaticResource WatermarkTextBox}" Tag="Nombre de usuario"/>
                            <TextBlock x:Name="ErrUsername" Foreground="#DC2626" FontSize="12" Margin="4,-10,0,0" Visibility="Collapsed"/>
                        </StackPanel>

                        <!-- Password + Confirm -->
                        <Grid Grid.Row="2">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition Width="16"/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>

                            <!-- Password -->
                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Contraseña" Style="{StaticResource FormLabel}"/>
                                <Grid>
                                    <PasswordBox x:Name="TxtPassword" Style="{StaticResource PasswordInput}"
                                                 PasswordChanged="TxtPassword_PasswordChanged"
                                                 GotKeyboardFocus="TxtPassword_GotKeyboardFocus"
                                                 LostKeyboardFocus="TxtPassword_LostKeyboardFocus"/>
                                    <TextBlock x:Name="PwdHint"
                                               Text="Mín. 6 caracteres"
                                               Foreground="Gray"
                                               Margin="14,17,14,0"
                                               VerticalAlignment="Top"
                                               IsHitTestVisible="False"
                                               TextWrapping="NoWrap"
                                               TextTrimming="CharacterEllipsis"
                                               ToolTipService.ShowDuration="60000">
                                        <TextBlock.ToolTip>
                                            <ToolTip Content="Mín. 6 caracteres"/>
                                        </TextBlock.ToolTip>
                                    </TextBlock>
                                </Grid>
                                <TextBlock x:Name="ErrPassword" Foreground="#DC2626" FontSize="12" Margin="4,-10,0,0" Visibility="Collapsed"/>
                            </StackPanel>

                            <!-- Confirm -->
                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Confirmar contraseña" Style="{StaticResource FormLabel}"/>
                                <Grid>
                                    <PasswordBox x:Name="TxtPassword2" Style="{StaticResource PasswordInput}"
                                                 PasswordChanged="TxtPassword2_PasswordChanged"
                                                 GotKeyboardFocus="TxtPassword2_GotKeyboardFocus"
                                                 LostKeyboardFocus="TxtPassword2_LostKeyboardFocus"/>
                                    <TextBlock x:Name="Pwd2Hint"
                                               Text="Repite tu contraseña"
                                               Foreground="Gray"
                                               Margin="14,17,14,0"
                                               VerticalAlignment="Top"
                                               IsHitTestVisible="False"
                                               TextWrapping="NoWrap"
                                               TextTrimming="CharacterEllipsis"
                                               ToolTipService.ShowDuration="60000">
                                        <TextBlock.ToolTip>
                                            <ToolTip Content="Repite tu contraseña"/>
                                        </TextBlock.ToolTip>
                                    </TextBlock>
                                </Grid>
                                <TextBlock x:Name="ErrPassword2" Foreground="#DC2626" FontSize="12" Margin="4,-10,0,0" Visibility="Collapsed"/>
                            </StackPanel>
                        </Grid>

                        <!-- Nombres y Apellidos -->
                        <Grid Grid.Row="3">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition Width="16"/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Nombres" Style="{StaticResource FormLabel}"/>
                                <TextBox x:Name="TxtNames" Style="{StaticResource WatermarkTextBox}" Tag="Tus nombres"/>
                                <TextBlock x:Name="ErrNames" Foreground="#DC2626" FontSize="12" Margin="4,-10,0,0" Visibility="Collapsed"/>
                            </StackPanel>

                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Apellidos" Style="{StaticResource FormLabel}"/>
                                <TextBox x:Name="TxtLastNames" Style="{StaticResource WatermarkTextBox}" Tag="Tus apellidos"
                                         TextChanged="TxtLastNames_TextChanged"/>
                                <TextBlock x:Name="ErrLastNames" Foreground="#DC2626" FontSize="12" Margin="4,-10,0,0" Visibility="Collapsed"/>
                            </StackPanel>
                        </Grid>

                        <!-- Teléfono y Correo -->
                        <Grid Grid.Row="4">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition Width="16"/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>

                            <StackPanel Grid.Column="0">
                                <TextBlock Text="Teléfono (dddd-dddd)" Style="{StaticResource FormLabel}"/>
                                <TextBox x:Name="TxtPhone" Style="{StaticResource WatermarkTextBox}" Tag="0000-0000"/>
                                <TextBlock x:Name="ErrPhone" Foreground="#DC2626" FontSize="12" Margin="4,-10,0,0" Visibility="Collapsed"/>
                            </StackPanel>

                            <StackPanel Grid.Column="2">
                                <TextBlock Text="Correo (.com)" Style="{StaticResource FormLabel}"/>
                                <TextBox x:Name="TxtEmail" Style="{StaticResource WatermarkTextBox}" Tag="tucorreo@dominio.com"/>
                                <TextBlock x:Name="ErrEmail" Foreground="#DC2626" FontSize="12" Margin="4,-10,0,0" Visibility="Collapsed"/>
                            </StackPanel>
                        </Grid>

                        <!-- Botones -->
                        <Grid Grid.Row="5" Margin="0,12,0,0">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition/>
                                <ColumnDefinition Width="16"/>
                                <ColumnDefinition/>
                            </Grid.ColumnDefinitions>

                            <Button Grid.Column="0" Style="{StaticResource PrimaryButton}" Content="Crear cuenta" Click="Create_Click"/>
                            <Button Grid.Column="2" Style="{StaticResource SecondaryButton}" Content="Cancelar" Click="Cancel_Click"/>
                        </Grid>

                        <!-- Link a Login -->
                        <StackPanel Grid.Row="6" Orientation="Horizontal" HorizontalAlignment="Center" Margin="0,10,0,0">
                            <TextBlock Text="¿Ya tienes cuenta? " Foreground="#6B7280"/>
                            <TextBlock Text="Inicia sesión" Style="{StaticResource Link}" MouseLeftButtonUp="BackToLogin_Click"/>
                        </StackPanel>
                    </Grid>
                </Border>
            </Grid>
        </Grid>
    </Border>
</Window>
